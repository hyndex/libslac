# Road vehicles — Vehicle to grid communication interface — Part 3: Physical and data link layer requirements

*(Véhicules routiers — Interface de communication entre véhicule et réseau électrique — Partie 3 : Exigences relatives à la couche physique et à la couche liaison de données)*

**INTERNATIONAL STANDARD** – ISO 15118-3
**First edition**: 2015-05-15
**Reference number**: ISO 15118-3:2015(E)

## Foreword

ISO (the International Organization for Standardization) is a worldwide federation of national standards bodies (ISO member bodies). The work of preparing International Standards is normally carried out through ISO technical committees. Each member body interested in a subject for which a technical committee has been established has the right to be represented on that committee. International organizations, governmental and non‑governmental, in liaison with ISO, also take part in the work. ISO collaborates closely with the International Electrotechnical Commission (IEC) on all matters of electrotechnical standardization.

The procedures used to develop this document and those intended for its further maintenance are described in the ISO/IEC Directives, Part 1. In particular the different approval criteria needed for the different types of ISO documents should be noted. This document was drafted in accordance with the editorial rules of the ISO/IEC Directives, Part 2 (see [www.iso.org/directives](http://www.iso.org/directives)).

Attention is drawn to the possibility that some of the elements of this document may be the subject of patent rights. ISO shall not be held responsible for identifying any or all such patent rights. Details of any patent rights identified during the development of the document will be in the Introduction and/or on the ISO list of patent declarations received (see [www.iso.org/patents](http://www.iso.org/patents)).

Any trade name used in this document is information given for the convenience of users and does not constitute an endorsement.

For an explanation on the meaning of ISO specific terms and expressions related to conformity assessment, as well as information about ISO’s adherence to the WTO principles in the Technical Barriers to Trade (TBT) see the following URL: *Foreword – Supplementary information*.

The committee responsible for this document is ISO/TC 22, Road vehicles, Subcommittee SC 31, Data communication.

ISO 15118 consists of the following parts, under the general title *Road vehicles — Vehicle to grid communication interface*:

* **Part 1:** General information and use-case definition
* **Part 2:** Network and application protocol requirements
* **Part 3:** Physical and Data Link Layer requirements

The following parts are under preparation:

* **Part 4:** Network and application protocol conformance test
* **Part 5:** Physical layer and data link layer conformance test
* **Part 6:** General information and use-case definition for wireless communication
* **Part 7:** Network and application protocol requirements for wireless communication
* **Part 8:** Physical layer and data link layer requirements for wireless communication

## Introduction

The pending energy crisis and the necessity to reduce greenhouse gas emissions has led the vehicle manufacturers to a very significant effort to reduce the energy consumption of their vehicles. They are presently developing vehicles partly or completely propelled by electric energy. Thus, vehicles will reduce the dependency on oil, improve the global energy efficiency, and reduce the total CO₂ emissions for road transportation if the electricity is produced from renewable sources. To charge the batteries of such vehicles, specific charging infrastructure is required.

Much of the standardization work on dimensional and electrical specifications of the charging infrastructure and the vehicle interface is already treated in the relevant ISO or IEC groups. However, the question of information transfer between the vehicle and the grid has not been treated sufficiently.

Such communication is beneficial for the optimization of energy resources and energy production systems as vehicles can recharge at the most economic or most energy-efficient instants.

It is also required to develop efficient and convenient payment systems in order to cover the resulting micro‑payments. The necessary communication channel might serve in the future to contribute to the stabilization of the electrical grid, as well as to support additional information services required to operate electric vehicles efficiently.

## 1 Scope

This part of ISO 15118 specifies the requirements of the physical and data link layer for a high-level communication, directly between battery electric vehicles (BEV) or plug-in hybrid electric vehicles (PHEV), termed as EV (electric vehicle) \[ISO-1], based on a wired communication technology and the fixed electrical charging installation \[Electric Vehicle Supply Equipment (EVSE)] used in addition to the basic signalling, as defined in \[IEC-1].

It covers the overall information exchange between all actors involved in the electrical energy exchange. ISO 15118 (all parts) is applicable for manually connected conductive charging.

Only “\[IEC-1] modes 3 and 4” EVSEs, with a high-level communication module, are covered by this part of ISO 15118.

## 2 Normative references

The following documents, in whole or in part, are normatively referenced in this document and are indispensable for its application. For dated references, only the edition cited applies. For undated references, the latest edition of the referenced document (including any amendments) applies.

* **ISO 15118-1:2013**, *Road vehicles — Vehicle to grid communication interface — Part 1: General information and use-case definition*
* **ISO 15118-2:2014**, *Road vehicles — Vehicle to grid communication interface — Part 2: Network and application protocol requirements*
* **IEC 61851-1:2010**, *Electric vehicle conductive charging system — Part 1: General requirements*
* **IEC/TS 62763:2013**, *Pilot function through a control pilot circuit using PWM (pulse width modulation) and a control pilot wire*

## 3 Terms and definitions

For the purposes of this document, the terms and definitions in \[ISO-1] and the following apply.

### 3.1 amplitude map

specifies a transmit power-reduction factor for each subcarrier related to the tone mask

### 3.2 central coordinator

manager of a HomePlug Green PHY network

### 3.3 channel access priority (**CAP**)

method to prioritize the channel access
*Note 1 to entry:* See \[HPGP].

### 3.4 coexistence

ability of different low-layer communication systems to share the same physical media and to function simultaneously

### 3.5 communication media

physical media carrying the low-layer communication signal, given by the cable assembly which connects the charging infrastructure and the EV

### 3.6 communication node

device equipped with a low-layer communication modem chip; it characterizes one logical and physical communication device that is attached to a physical media and is capable of sending, receiving, or forwarding information over a communication channel

### 3.7 connection coordination

entity which provides the whole functionality for EV to EVSE matching and initialization, through the data link control SAP, described in Clause 6
*Note 1 to entry:* This entity also controls the relationships between the basic signalling and the upper layers.

### 3.8 crosstalk

capacitive or inductive coupling between two individual electric circuits, each providing a media for a low-layer communication network, in a way that the two networks are influenced by each other

### 3.9 data link control SAP

service access point which defines the interface between the connection coordination module and the low-layer communication technology for managing the link status

### 3.10 DATA SAP

service access point that defines the interface between layer 2 and layer 3 for exchange of V2G-related payload

### 3.11 ETH SAP

Ethernet II-class SAP supports applications using Ethernet II class packets, including IEEE 802.3 with or without IEEE 802.2 (LLC), IEEE 802.1H (SNAP) extensions, and/or VLAN tagging

### 3.12 external identification means (**EIM**)

any external means that enable the user to identify his contract or the car

### 3.13 initialization

process of interaction between the EV, EVSE, and an external trigger, beginning from plug-in of the cable assembly until the decision for the charging mode to be applied
*Note 1 to entry:* This process is used for the charging modes 3 and 4, as described in \[IEC-1].

### 3.14 IO SAP

IO control path interfaces hardware I/O control (e.g. control pilot duty cycle) and the control pilot wire
*Note 1 to entry:* This entity provides an IO SAP, which is defined in Clause 12.

### 3.15 inter system protocol

enables various broadband power line systems to share power line communication resources in time (time domain multiplex), in frequency (frequency domain multiplex), or both
*Note 1 to entry:* For more information, refer to \[IEEE].

### 3.16 logical network

set of low-layer communication stations which use the same network key
*Note 1 to entry:* Only members of the same logical network are able to exchange encrypted payload data and are visible to each other on higher layers. Different logical networks might exist on the same physical media at the same time and are typically used for network segmentation.
*Note 2 to entry:* A logical network is defined for layer 2.

### 3.17 low-layer communication

functions managed by the OSI layer 1 and layer 2 of the modem

### 3.18 low-layer communication module

functional assembly behind each socket outlet or each connector, depending on the type of EV connection (\[IEC-1]), which includes the communication node and the connection coordination functionality

### 3.19 MAC address

unique identifier assigned to network interfaces for communication on the data link layer

### 3.20 management message entry (**MME**)

messages exchanged between PLC nodes or a PLC node and higher layers for control purposes

### 3.21 matching

process to determine the low-layer communication modules of EV and EVSE to which the EV is physically connected in a direct way
*Note 1 to entry:* “Matching” refers to “Association” (use-case A) in ISO 15118-1.

### 3.22 nominal duty cycle

10% to 96% control pilot duty cycle, according to \[IEC-1], generated by the EVSE

### 3.23 pilot function controller

system that manages the control pilot line on the EVSE side, according to \[IEC-1]

### 3.24 plug and charge

identification mode where the customer just has to plug their vehicle into the EVSE and all aspects of charging are automatically taken care of with no further intervention from the customer

### 3.25 QPSK modulation

phase modulation technique that transmits two bits in four modulation states

### 3.26 ROBO mode

communication mode which uses QPSK only for carrier modulation within the orthogonal frequency division multiplexing (OFDM) to achieve higher robustness in transmission
*Note 1 to entry:* The ROBO mode can be set to three different performance levels: Mini-ROBO, Standard ROBO, and High-speed ROBO.

### 3.27 shared bandwidth

in cases where different systems use the same physical media to transmit data, the data rate for each system might be limited, depending on the mechanism used to allocate it

### 3.28 signal coupling

method of coupling the signal on the communication media

### 3.29 signal level attenuation characterization (**SLAC**)

protocol to measure the signal strength of a signal between HomePlug Green PHY stations

### 3.30 tone mask

defines the set of tones (or carriers) that can be used in a given regulatory jurisdiction or given application

### 3.31 valid duty cycle

duty cycle that is 5% or 10% to 96%, according to \[IEC-1], generated by the EVSE

## 4 Symbols and abbreviated terms

**ARIB** – Association of Radio Industries and Businesses
**CAP** – Channel Access Priority
**CCo** – Central Coordinator
**D-LINK** – Data Link
**EIM** – External Identification Means (as defined in ISO 15118-1)
**ERDF** – Electricité et Réseau de France
**FCC** – Federal Communications Commission
**HLE** – Higher Layers Entities
**HPGP** – HomePlug Green PHY
**ID** – Identification
**IEEE** – Institute of Electrical and Electronics Engineers
**ISP** – Intersystem Protocol
**ITU** – International Telecommunication Union
**MAC** – Media Access Control
**MME** – Management Message Entry
**PE** – Protective Earth
**PLC** – Power Line Communication
**PnC** – Plug and Charge (as defined in ISO 15118-1)
**QPSK** – Quadrature Phase Shift Keying
**SAP** – Service Access Point
**SE** – Supply Equipment
**SLAC** – Signal Level Attenuation Characterization

## 5 Conventions

### 5.1 Definition of OSI based services

\[ISO-3] is based on the OSI service conventions (ISO/IEC 10731:1994) for the individual layers specified in this part of ISO 15118.

### 5.2 Requirement structure

Each individual requirement included in this part of ISO 15118 has a unique code, e.g. **\[V2G3-YXX-ZZZ] requirement text**, where:

* “V2G3” represents the \[ISO-3] set of standards,
* “Y” represents the main body (M) / annexes (Annexes’ letter),
* “XX” represents the number of the current clause,
* “ZZZ” represents the individual requirement number, and
* “requirement text” includes the actual text of the requirement.

*EXAMPLE:* **\[V2G3-M01-01]** This shall be an example requirement.

### 5.3 Normative references convention

Each reference to a normative document has the following unique codes assigned:

* **\[IEC-1]** IEC 61851-1
* **\[IEC-21]** IEC 61851-21
* **\[IEC-22]** IEC 61851-22
* **\[IEC-2]** IEC 62196-2
* **\[IEC-3]** IEC/TS 62763
* **\[ISO-0]** ISO 15118-series
* **\[ISO-1]** ISO 15118-1
* **\[ISO-2]** ISO 15118-2
* **\[ISO-3]** ISO 15118-3

## 6 System architecture

### 6.1 Communication layers overview

This part of ISO 15118 is organized along architectural lines, emphasizing the large-scale separation of the system into two parts: the MAC sublayer of the data link layer and the physical layer. These layers are intended to correspond closely to the lowest layers of the ISO/IEC model for open systems. **Figure 1** shows the relationship of the \[ISO-3] to the OSI reference model.

&#x20;*Figure 1 — Overview of \[ISO-0] in the ISO/IEC OSI reference model*

\[ISO-3] defines requirements applicable to layer 1 and layer 2, including V2G standardized service primitive interface, according to the OSI layered architecture. Layer 3 to layer 7 is specified in \[ISO-2].

Beside the communication-related stack on the left and middle of **Figure 2**, a hardware control path on the right provides triggering and signalling means for \[IEC-1] related signalling.

This part of ISO 15118 covers both AC and DC use-cases. If not defined differently, requirements apply for both AC and DC.

### 6.2 Definition of high-level communication and basic signalling

This part of ISO 15118 describes in the main body the general requirements to the communication. Specific requirements depending on the technology are described in the Annex A.

#### 6.2.1 Basic signalling

**\[V2G3-M06-01]** The basic signalling follows \[IEC-1]. All timings shall be compliant with the \[IEC-1], Annex A.

Any charging process, no matter the presence of high-level communication, uses the bidirectional signalling according to \[IEC-1], indicating EV-related information through control pilot states and EVSE-related information through the duty cycle of the control pilot signal.

#### 6.2.2 High-level communication

**\[V2G3-M06-02]** The HLC shall be used in addition to the basic signalling in order to enable a bidirectional communication and offer additional features.

The sequence of the data exchange within the HLC-based charging session is done in accordance with the \[ISO-2] communication protocol.

It can be split into three periods as follows:

* data link setup;
* V2G setup;
* V2G charging loop.

*NOTE:* The detailed descriptions are given in \[ISO-2].

**\[V2G3-M06-03]** During the V2G charging loop, the PWM duty cycle shall not change due to dynamically changed grid information. Those dynamically changed grid limitations shall be provided through the high-level communication messages.

In case basic charging is used as backup of HLC-C (e.g. when HLC-C has failed), the duty cycle is allowed to change due to dynamically changed grid information, according \[IEC-1] requirements.

### 6.3 Identification requirements

The initialization phase depends on whether identification “ID from EV” or EIM is required, as described in \[ISO-1], use-cases D1, D2, D3, and D4.

**\[V2G3-M06-04]** When authorization (payment) is required for charging, the EVSE shall offer PnC (ID from EV) or EIM means.

Any payment included in a package (parking fee, in a flat rate, etc.) is considered as “No ID required” since the energy is paid for by means totally independent of the EVSE.

*NOTE 1:* The need for authentication can be externally triggered.
*NOTE 2:* The “ID required” covers only the ID for operating purposes and does not cover all the identification linked to the “security” as described in the \[ISO-2].
*NOTE 3:* The feature PnC is called “ID from EV”, using the message set of \[ISO-2].
*NOTE 4:* At a publicly accessible EVSE with only “ID from EV”, there might be a fallback solution to allow any EV to be able to charge.

If the duty cycle is set to 5% and PnC is intended to be used, the EVCC may launch an “ID recognition” from the EV (Use-case D1 and D2 of \[ISO-1]). According to the EV’s answer, the SECC may decide to allow the charge or not.

### 6.4 System requirements

In the following subclauses, the abbreviations concerning the control pilot states (e.g. X1, X2, B1, B2, etc.) are described in \[IEC-3].

#### 6.4.1 Overview

This Clause defines the requirements on the triggering of the EVSE and the EV immediately after the plug-in of the cable assembly. It includes the specifications of sequences, when and how the contract ID is recognized, when to launch the matching process (at the MAC level), and how to decide to use basic charging or high-level communication charging.

#### 6.4.2 EVSE

##### 6.4.2.1 Control pilot requirements

Each EVSE outlet has its own dedicated pilot function controller.

The trigger and timing relations between basic signalling and HLC connection setup are described in Clause 7.

For implementation and synchronization between \[IEC-1] and \[ISO-3], please refer to \[ISO-2] 8.7.4.

*NOTE 1:* If a nominal duty cycle is set, it is recommended to keep it as the maximum current capacity of the charging station and let the high-level communication messages dynamically adjust the available max current.

##### 6.4.2.2 Low-layer communication requirements

The \[ISO-1], Annex A provides examples for charging infrastructure architectures. The matching process is designed to work between the low-layer communication module locally assigned to each socket-outlet on the EVSE side, and the EVCC.

*NOTE 2:* It is highly recommended to build a point-to-point architecture (one low-layer communication module on EVSE side, and one low-layer communication module per EV).

**\[V2G3-M06-05]** In case no communication could be established with a 5% control pilot duty cycle (matching process not started), if the EVSE wants to switch to a nominal duty cycle, then the change from 5% to a nominal duty cycle shall be done with a specific sequence B2 or C2 (5%) -> E or F -> B2 (nominal value) to allow backward compatibility. The minimum time at the control pilot state E or F is defined as T\_step\_EF.
*NOTE 3:* Each EVSE supplier is free to choose between the state E and the state F to make the transition, according to its implementation.

**\[V2G3-M06-06]** In case a communication has already been established within 5% control pilot duty cycle (“Matched” state reached or matching process ongoing), a change from 5% to a nominal duty cycle shall be done with an X1 state in the middle (minimum time as defined in \[IEC-3] Seq 9.2), to signal the EV that the control pilot duty cycle will change to a nominal duty cycle.

**\[V2G3-M06-07]** If an AC EVSE applies a 5% control pilot duty cycle, and the EVSE receives no SLAC request within Tᵀᴱ\_EVSE\_SLAC\_init, the EVSE shall go to state E or F for T\_step\_EF, shall go back to 5% duty cycle, and shall reset the Tᵀᴱ\_EVSE\_SLAC\_init timeout before being ready to answer a matching request again. This sequence shall be retried C\_sequ\_retry times. At the end, without any reaction, the EVSE shall go to state X1.
*NOTE 4:* In the X1 control pilot state, a customer can make an EIM action at any time.

**\[V2G3-M06-08]** After positive EIM, if no matching process is running, the EVSE shall signal control pilot state E/F for T\_step\_EF, then signal control pilot state X1/X2 (nominal).

**\[V2G3-M06-09]** If a control pilot state E/F -> Bx, Cx, Dx transition is used for triggering retries or legacy issues, the state E/F shall be at least T\_step\_EF.

#### 6.4.3 EV

##### 6.4.3.1 Control pilot requirements

On seeing a nominal duty cycle, the EV may launch the charge at any time.

**\[V2G3-M06-12]** In the HLC-C mode, in case of a nominal duty cycle, the vehicle shall determine the maximum charge current, defined by the EVSE, by calculating the minimum of the following values:

* maximum charge current given by the control pilot duty cycle;
* maximum charge current given by the HLC-C messages.

##### 6.4.3.2 Low-layer communication requirements

*(Content of 6.4.3.2 continues with technology-specific details, which are defined in Annex A.)*

## 7 Connection coordination

### 7.1 General

*(Clause 7 outlines the phases of connection coordination between EV and EVSE.)*

### 7.2 Overview

*(Clause 7.2 provides an overview of the connection process, including plug-in, initialization, loss of communication, sleep mode, wake-up, and plug-out phases.)*

### 7.3 Plug-in phase

This phase covers the plug-in up to the beginning of the charge.

#### 7.3.1 EVSE side

**\[V2G3-M07-01]** After successful detection of the plug-in of a cable assembly, the low-layer communication module shall be ready for communication in less than T\_conn\_max\_comm.

*NOTE 1:* Plug-in detection by EVSE can be done either by proximity pin detection or by closed control pilot.
*NOTE 2:* During a plug-in phase, AC EVSEs with Type 2 outlet or DC EVSEs with Type 1 connector should only apply a voltage to the control pilot when the low-layer communication module is ready for communication. This speeds up the communication setup.

**\[V2G3-M07-02]** The EVSE shall only apply 5% control pilot duty cycle if the low-layer communication module is ready for communication (receive first SLAC message).

According to the initialization process, an EVSE should be prepared to receive EIM identification, if offered, at any time.
*NOTE 3:* The EIM sequence is compliant with use-case A2 from \[ISO-1].

#### 7.3.2 EV side

When detecting a nominal duty cycle, the EV can either start charging in the basic charging mode or wait until the HLC-C mode is established.

### 7.4 Initialization phase

When the V2G data link setup is successful and if the PnC identification mode is implemented, further identification is managed by higher layers as described in \[ISO-2] (e.g. ID recognition).

### 7.5 Loss of communication

This Clause covers the situation where the communication link is lost. A loss of communication after the establishment of a data link (D-LINK\_READY.indication link established) was already indicated is handled by higher layers, by requesting with D-LINK\_ERROR.request.

#### 7.5.1 EVSE side

**\[V2G3-M07-03]** If a data link was established and a D-LINK\_READY.indication (link established) was already indicated to higher layers, any detected loss of the data link shall cause a D-LINK\_READY.indication (no link) indication to higher layers.

**\[V2G3-M07-04]** With receiving a D-LINK\_ERROR.request from HLE in X1 state, the EVSE’s communication node shall perform a state X1 to state E/F to state X1 or X2 transition.

#### 7.5.1.1 Error handling with a control pilot duty cycle of 5%

**\[V2G3-M07-05]** With receiving a D-LINK\_ERROR.request in X2 state from HLE, the EVSE’s communication node shall perform a state X2 to X1 to state E/F to state X1 or X2 transition.

**\[V2G3-M07-06]** Within the control pilot state X1, the communication node shall leave the logical network and change the matching state to “Unmatched”.

**\[V2G3-M07-07]** With reaching the state “Unmatched”, the EVSE shall switch to state E/F.

**\[V2G3-M07-08]** The state E/F shall be applied at least T\_step\_EF.

**\[V2G3-M07-09]** After applying state E/F, the EVSE shall switch to control pilot state X1 or X2 as soon as the EVSE is ready for incoming matching requests.

#### 7.5.1.2 Error handling with nominal control pilot duty cycle

**\[V2G3-M07-10]** With receiving a D-LINK\_ERROR.request from HLE in X1 state, the EVSE’s communication node shall implement one of the two following options:

**Option A:** to have behaviour independent of the duty cycle:

* **\[V2G3-M07-11]** The requirements of 7.5.1.1 shall be applied to have behaviour independent of the duty cycle.

**Option B:** not to interrupt charging due to a control pilot state change to state E:

* **\[V2G3-M07-12]** With receiving a D-LINK\_ERROR.request from HLE, the EVSE’s communication node shall stay in X2 control pilot state, leave the logical network (within TP\_match\_leave), and change the matching state to “Unmatched” to be ready for a new matching process.

### 7.5.2 EV side

If the EV detects a loss of communication, it can either switch to basic charging mode or stop the charge. While relaunching the matching process, the EV may go on charging in the basic charging mode, if the EVSE sets a nominal duty cycle.

*NOTE:* The matching process after a loss of communication is exactly the same as during a plug-in phase.

#### 7.5.2.1 Error handling with control pilot duty cycle of 5%

**\[V2G3-M07-13]** With receiving a D-LINK\_ERROR.request from HLE, the EV’s communication node shall change to Bx state, leave the logical network and change the matching state to “Unmatched” within TP\_match\_leave and wait for a new incoming matching trigger (control pilot X1 or X2 state).

#### 7.5.2.2 Error handling with nominal control pilot duty cycle

**\[V2G3-M07-14]** With receiving a D-LINK\_ERROR.request from HLE, the EV’s communication node shall implement one of the two following options:

* **Option A:** to have behaviour independent of the duty cycle:

  * **\[V2G3-M07-15]** The requirements of 7.5.2.1 shall be applied to have behaviour independent of the duty cycle.

* **Option B:** not to interrupt charging due to a control pilot state change to state E:

  * **\[V2G3-M07-16]** With receiving a D-LINK\_ERROR.request from HLE, the EV’s communication node shall keep the current state and leave the logical network and change the matching state to “Unmatched”.
  * **\[V2G3-M07-17]** T\_conn\_resetup after the condition in \[V2G3-M07-16] is met; the EV shall restart the matching process.
  * **\[V2G3-M07-18]** During the T\_conn\_resetup waiting state according to \[V2G3-M07-17], the EV shall be prepared to be forced to restart by an EVSE which has implemented option A according to \[V2G3-M07-10].

### 7.6 Sleep mode and wake-up

A sleep mode is used for energy saving. EV and EVSE can enter a sleep mode after negotiating a pause through HLC protocol.

On the EVSE side, a sleep mode means that the oscillator will be off (X1 control pilot state), the +12 V supply of the pilot line will stay on, and the low-layer communication module may be powered off.

On the EV side, a sleep mode means control pilot state B and the low-layer communication module may be powered off. The wake-up mechanisms may also be used after a charge session was already terminated to allow the counterpart station to reestablish HLC.

#### 7.6.1 Entering the sleep mode

**\[V2G3-M07-19]** With receiving a D-LINK\_PAUSE.request, the EV shall change to control pilot state Bx. Unpowering the low-layer communication module is optional. The logical network parameter set shall be stored for continuing the data link after the sleeping phase.

**\[V2G3-M07-20]** With receiving a D-LINK\_PAUSE.request, the EVSE shall switch to control pilot state X1 and may switch the low-layer communication module into low-power mode. The logical network parameter set shall be stored for continuing the data link after the sleeping phase.

#### 7.6.2 Wake-up

**\[V2G3-M07-21]** As soon as the lower layers detect a data link after a wake-up, it shall send a D-LINK\_READY.indication (link established) to HLE.

**\[V2G3-M07-22]** If the EVSE or EV is in “Matched” state and has been woken up from the counterpart station, the low-layer communication module shall be configured to the last known logical network parameter set.

**\[V2G3-M07-23]** In case of a wake up trigger from the counterpart station, the low-layer communication module shall be ready in maximum T\_conn\_resume after the trigger (B1/B2, BCB-Toggle).

##### 7.6.2.1 EVSE side

**\[V2G3-M07-24]** To wake-up the EV, the pilot function controller on EVSE side shall be configured to the last known parameter set and the oscillator shall perform a B1/B2 transition.

**\[V2G3-M07-25]** As soon as the EVSE is ready to charge and ready to communicate after a wake-up from EV, it shall switch to X2 state.

**\[V2G3-M07-26]** If the EVSE is in a charge pause, it shall wake up by detecting a BCB-Toggle and shall configure the low-layer communication module to the last known logical network parameter.

**\[V2G3-M07-27]** If the EVSE does not detect a PLC link after a wake-up for T\_conn\_max\_comm, it shall reinitiate the connection by applying a state E for at least T\_step\_EF to retrigger the setup of the connection by a matching process as described in 7.5.

##### 7.6.2.2 EV side

**\[V2G3-M07-28]** In the case the EVSE applies a control pilot state X1 when the EV resumes from sleep state, a single BCB-Toggle shall be performed, as defined in 9.4, to wake up the EVSE.

**\[V2G3-M07-29]** After waking up, the PLC node on EV side shall be configured to the last known parameter set.

**\[V2G3-M07-30]** If the EV is in a charge pause, it shall wake up by detecting a control pilot state B1/B2 transition and shall configure the communication module to the last known logical network parameter.

#### 7.6.3 During a charge pause

**\[V2G3-M07-31]** During a sleeping phase (EV or EVSE side), the EVSE shall not turn off the +12 V supply in order to keep the pilot line alive.

**\[V2G3-M07-32]** The EVSE shall not put its low-layer communication module to sleep, if the control pilot oscillator is on.

An EV shall wake-up on detecting a transition B1 -> B2, according to \[IEC-1].

**\[V2G3-M07-33]** In case of a control pilot state X2 -> X1 -> X2 transition, the time at X1 is defined in \[IEC-3] Seq 9.2.

### 7.7 Plug-out phase

This phase supposes that the customer gave a hint to the system that he wants to unplug.

**\[V2G3-M07-34]** For an unexpected loss of communication, requirement \[V2G3-M09-19] shall be taken into account.

## 8 Timings and constants

This Clause summarizes all timings used in the main body of this part of ISO 15118.

**\[V2G3-M08-01]** All low-layer communication devices shall comply with Table 3.

**Table 3 — Timing and constant values**

| Parameter                         | Description                                                                                                          | Min  | Typical | Max  | Unit |
| --------------------------------- | -------------------------------------------------------------------------------------------------------------------- | ---- | ------- | ---- | ---- |
| **C\_conn\_max\_match**           | Number of retries of matching process                                                                                | 3    |         |      | nbr  |
| **C\_EV\_vald\_nb\_toggles**      | Number of BCB-Toggles                                                                                                | 1    |         | 3    | nbr  |
| **C\_EVSE\_match\_parallel**      | Number of parallel matching processes to be handled by EVSE                                                          | 5    |         |      | nbr  |
| **C\_sequ\_retry**                | Number of matching retries by Control Pilot state E transitions                                                      | 2    | 2       | 2    | nbr  |
| **T\_conn\_init\_HLC**            | Minimum B state duration after a state F, D, or C                                                                    | 200  |         |      | ms   |
| **T\_conn\_resume**               | Time after the wake up trigger (e.g. BCB-Toggle) until the low-layer communication module is ready for communication | 6    |         |      | s    |
| **T\_conn\_max\_comm**            | Time after plug-in until the low-layer communication module is ready for communication                               | 8    |         |      | s    |
| **T\_conn\_resetup**              | Time to re-setup the matching process after a loss of communication                                                  | 15   |         |      | s    |
| **T\_vald\_detect\_time**         | Time to detect a variation of the state on EVSE side                                                                 | 200  |         |      | ms   |
| **TP\_EV\_vald\_state\_duration** | Duration of each state B or C within the BCB-Toggle                                                                  | 200  |         | 400  | ms   |
| **TP\_EV\_vald\_toggle**          | Duration of BCB-Toggle sequence                                                                                      | 600  |         | 3500 | ms   |
| **TT\_EVSE\_vald\_toggle**        | Timeout for the EVSE to stop monitoring control pilot for BCB-Toggle (from CM\_VALIDATE.REQ)                         | 3500 |         |      | ms   |
| **TP\_match\_leave**              | Maximum time to leave the logical network                                                                            | 1    |         |      | s    |
| **T\_step\_EF**                   | Time to stay at E/F state                                                                                            | 4    |         |      | s    |

**\[V2G3-M08-02]** Any successful matching process shall reset all the timeout timers and reset the retry\_counters.

## 9 Matching EV — EVSE process

### 9.1 Overview

A unique matching between the EV and a specific charge coupler of the EVSE is necessary for most of the use cases. After the matching process, which is defined within this Clause, upper layers are able to proceed with their binding process. Interfaces related to data link status between the layers are defined in Clause 12. Depending on the communication signal paths, the matching process depends on the infrastructure topology.

Under some technical conditions, the matching process might render ambiguous results. In this case, an additional validation process based on a signalling through the control pilot line can be necessary to confirm the matching.

**Figure 10** gives a generic overview of the matching process. The full description is given in the corresponding annex.

*(Figure 10 illustrates the matching sequence from EV and EVSE perspectives.)*

### 9.2 Initialization of matching process

*(Describes initiation of matching procedure after plug-in.)*

### 9.3 Discovery of the connected low-layer communication module

*(Describes the SLAC process to discover and pair EV and EVSE communication modules.)*

### 9.4 Validation of matching decision

*(Describes optional validation signals via control pilot to confirm correct matching.)*

### 9.5 Set-up a logical network

*(Describes establishment of a logical PLC network (AVLN) between EV and EVSE for communication.)*

### 9.6 Leave the logical network

*(Describes disconnection from the logical network when charging session ends or on error.)*

The reference EVSE implementation monitors the PLC link while the control pilot
duty cycle indicates X2 (> 5 %). If the modem becomes unresponsive, the EVSE
leaves the AVLN and restarts `qca7000startSlac()` without toggling the control
pilot to states E or F. High level communication resumes automatically once a
new match is obtained.

### 9.7 Error handling

*(Specifies how matching errors are handled, including references to requirements in Clause 7.)*

## 10 EMC requirements

Requirements are defined in \[IEC-21] and \[IEC-22]. Technology related EMC requirements are defined in the corresponding annexes.

## 11 Signal coupling

The signal coupling, as well as additional requirements regarding the physical layer, the MAC layer and the interface with the network layer are defined within the corresponding annexes.

## 12 Layer 2 interfaces

### 12.1 Overview

This Clause describes the terminology primitives used within this part of ISO 15118. It is for explanation and for definition of a unique terminology only. This terminology is implementation independent.

As shown in **Figure 2**, the definition of the data link layer provides the following two interfaces to higher layers:

— *Data SAP* is the interface between the communication technology and the layer 3 (e.g. IPv6).
— *Data link control SAP* provides link status information, error information, control functionality and is located between the connection coordination and higher layers.

### 12.2 Data SAP

The data SAP interfaces higher-layer data to a low-layer communication technology’s data link layer.

### 12.3 Data link control SAP to layer 3

These primitives are defined according to \[ISO-2].

**\[V2G3-M12-01]** The D-LINK\_READY.indication shall inform higher layers about a change of communication link status. This indication shall be sent with any change in link status. The values of the D-LINK\_READY status are independent of the states of the control pilot signal.

**Table 4 — D-LINK\_READY.indication primitive**

| Primitive                | Entity to support | Parameter name | Description                                                          |
| ------------------------ | ----------------- | -------------- | -------------------------------------------------------------------- |
| D-LINK\_READY.indication | EV, EVSE          | D-LINKSTATUS   | Status of communication link:<br>— *no link*<br>— *link established* |

The D-LINK\_TERMINATE.request requests lower layers to terminate the data link.

**Table 5 — D-LINK\_TERMINATE.request primitive**

| Primitive                 | Entity to support |
| ------------------------- | ----------------- |
| D-LINK\_TERMINATE.request | EV, EVSE          |

The D-LINK\_ERROR.request requests lower layers to terminate the data link and restart the matching process by a control pilot transition through state E.

**Table 6 — D-LINK\_ERROR.request primitive**

| Primitive             | Entity to support |
| --------------------- | ----------------- |
| D-LINK\_ERROR.request | EVSE              |

The D-LINK\_PAUSE.request requests lower layers to enter a power saving mode. While being in this mode, the state will be kept to “Matched”.

**Table 7 — D-LINK\_PAUSE.request primitive**

| Primitive             | Entity to support |
| --------------------- | ----------------- |
| D-LINK\_PAUSE.request | EV, EVSE          |

*Note:* The D-LINK\_READY.indication, D-LINK\_TERMINATE.request, D-LINK\_ERROR.request, and D-LINK\_PAUSE.request primitives are further detailed in the annexes for specific technologies.

---

## Annex A (normative) – HomePlug Green PHY on control pilot line

### A.1 Introduction

This Annex describes all requirements for the HomePlug Green PHY technology on control pilot line. All requirements of this Annex are mandatory.

If not specifically indicated, both generic and technology-dependent requirements are mandatory.

### A.2 Normative references relevant for Annex A

The following referenced documents are indispensable for the application of this Annex. For dated references, only the edition cited applies. For undated references, the latest edition of the referenced document (including any amendments) applies.

* *IEEE 1901*, *Standard for Broadband over Power Line Networks: Medium Access Control and Physical Layer Specifications*, release version of 2011
* *HomePlug Green PHY Specification*

### A.3 Terms and definitions

For the purposes of this document, the following terms and definitions in addition to the terms and definitions given in Clause 3 apply.

#### A.3.1 amplitude map

specifies a transmit power-reduction factor for each subcarrier related to the Tone Mask

#### A.3.2 central coordinator

manager of a HomePlug Green PHY network

#### A.3.3 channel access priority (**CAP**)

method to prioritize the channel access
*Note 1 to entry:* See \[HPGP].

#### A.3.4 inter system protocol

enables various Broadband Power Line systems to share power line communication resources in time (time domain multiplex), in frequency (frequency domain multiplex), or both
*Note 1 to entry:* For more information, refer to \[IEEE].

#### A.3.5 management message entry (**MME**)

messages exchanged between PLC nodes or a PLC node and higher layers for control purposes

#### A.3.6 QPSK modulation

phase modulation technique that transmits two bits in four modulation states

#### A.3.7 ROBO mode

communication mode which uses QPSK only for carrier modulation within the orthogonal frequency division multiplexing (OFDM) to achieve higher robustness in transmission
*Note 1 to entry:* The ROBO mode can be set to three different performance levels: Mini-ROBO, Standard ROBO, and High Speed ROBO.

#### A.3.8 signal level attenuation characterization (**SLAC**)

protocol to measure the signal strength of a signal between HomePlug Green PHY stations

#### A.3.9 tone mask

defines the set of tones (or carriers) that can be used in a given regulatory jurisdiction or given application

### A.4 Symbols and abbreviated terms

**CAP** – Channel Access Priority
**CCo** – Central Coordinator
**HPGP** – HomePlug Green PHY
**ISP** – Intersystem Protocol
**MME** – Management Message Entry
**PE** – Protective Earth
**PLC** – Power Line Communication
**QPSK** – Quadrature Phase Shift Keying
**SLAC** – Signal Level Attenuation Characterization

### A.5 Conventions applicable for Annex A

All conventions are described in the Clause 5 of this part of ISO 15118 and are used in all annexes.

*(In addition to the normative references defined in 5.3, the following references to normative documents are used in this Annex:* **\[IEEE]** IEEE 1901; **\[HPGP]** HomePlug Green PHY Specification.)\*

### A.6 System architecture

#### A.6.1 Layers overview

*(Figure 2 in the main body and Figure A.1 in Annex A give overviews of the architecture. The definition of the data link layer in Annex A provides two interfaces (Data SAP and Data link control SAP) analogous to those in the main body. These interfaces, and the layering of HomePlug Green PHY MAC and PHY, are described here.)*

#### A.6.1.1 Communication media

In this Annex, the communication media (block as shown in **Figure 2**) is the control pilot line (\[IEC-1], Annex A).

#### A.6.1.2 Data SAP

The data SAP is the ETH SAP. The ETH SAP is completely covered by the \[HPGP].

Due to the convergence layer, the data link layer of HomePlug Green PHY provides an Ethernet II-class SAP to higher layers.

This SAP supports applications using Ethernet II-class packets, including IEEE 802.3 with or without IEEE 802.2 (LLC), IEEE 802.1H (SNAP) extensions, and/or VLAN tagging.

The data link control SAP indicates link status and error information to higher layers and is provided by the connection coordination entity.

#### A.6.1.3 Signal coupling

The signal coupling interface is described in A.11.

#### A.6.1.4 MAC/PHY stack

*The highlighted entities of **Figure 2** represent the whole HomePlug Green PHY MAC and PHY layer and are covered by \[HPGP]. The convergence layer adapts the generic HomePlug Green PHY MAC to an IEEE 802.3 Ethernet II-class interface through the ETH SAP. The control SAP provides a control interface to access HomePlug Green PHY specific data and configuration for network management, including encryption key management, SLAC services, and link status information.*

#### A.6.1.5 Connection coordination

There are no additional requirements for the technology in this subclause (the connection coordination is handled as in the main body).

#### A.6.2 Definition of high-level communication and basic signalling

There are no additional requirements for the technology (the definitions are as in the main body).

#### A.6.3 Identification requirements

There are no additional requirements for the technology.

*(Annex A continues with detailed technical requirements specific to HomePlug Green PHY, including PLC signal characteristics, tone masks, MAC management messages (MMEs) for matching process (Annex A.9), electrical characteristics (Annex A.11), etc., all of which must be complied with in addition to main body requirements.)*

## Annex B (informative) – IEEE 1901.2 G3-PLC profile on control pilot line

*NOTE:* This Annex has not been prepared by the project team responsible for the development of this part of ISO 15118.

### B.1 Introduction

This Annex describes all requirements for the G3-PLC technology on CPLT (control pilot line). All requirements defined in this Annex are mandatory as soon as this Annex is deployed. The G3-PLC profile is as referenced in IEEE 1901.2, Clause 9 with addition of FCC and ARIB bands supporting IEEE 1901.2, Clause 6 (Cenelec FCH in differential mode with future coherent option and supporting IEEE 1901.2 backward compatibility).

### B.2 Normative references relevant for Annex B

The following referenced documents are indispensable for the application of this Annex. For dated references, only the edition cited applies. For undated references, the latest edition of the referenced document (including any amendments) applies.

* *IEEE 1901.2*, *Standard for Low Frequency (less than 500 kHz) Narrow Band Power Line Communications for Smart Grid Applications*
* *ITU G.9903 Amd 1*, *Narrow-band orthogonal frequency division multiplexing power line communication transceivers for G3-PLC networks*

### B.3 Terms and definitions

For the purposes of this Annex, the following terms and definitions (in addition to those given in Clause 3) apply.

#### B.3.1 IEEE 1901.2

*Standard for Low Frequency (less than 500 kHz) Narrow Band Power Line Communications for Smart Grid Applications*

#### B.3.2 ITU G.9903 Amd 1

*Narrow-band orthogonal frequency division multiplexing power line communication transceivers for G3-PLC networks*

### B.4 Symbols and abbreviated terms

**ERDF** – Electricité et Réseau de France
**FCC** – Federal Communications Commission
**IEEE** – Institute of Electrical and Electronics Engineers
**ITU** – International Telecommunication Union
**ARIB** – Association of Radio Industries and Businesses

### B.5 Conventions applicable for Annex B

There are no specificities. *(All conventions are as described in Clause 5.)*

### B.6 Software architecture

#### B.6.1 Specific overview for G3-PLC technology

This subclause is organized along architectural lines, emphasizing the large-scale separation of the system into two parts: the Media Access Control (MAC) sublayer of the data link layer and the physical layer. These layers are intended to correspond closely to the lowest layers of the ISO/IEC model for Open Systems. **Figure B.1** shows the relationship of the ISO 15118 physical and data link layer to the OSI reference model.

```
Application
Presentation
Session
Transport
Network
Data link
Physical
OSI reference model layers

                Higher layers
      Data link            Data link
       Data SAP         Control SAP
      (6LoWPAN         (MLME-SAP)
   Adaptation sublayer)       
      (MCPS-SAP)               

           MAC Layer
   PD-SAP           PLME-SAP

Physical layer     Pilot line
Communication media   Signal coupling

Key: [grey] = covered by G3 specification
```

*Figure B.1 — ISO 15118 physical and data link layer relationship to the ISO/IEC OSI reference model*

#### B.6.2 Entity overview

##### B.6.2.1 Communication media

The physical media carrying the PLC signal is defined by the cable assembly, which connects the power outlet and the EV.

##### B.6.2.2 Signal coupling

The signal coupling interface is defined in B.9 and describes the method of coupling the low frequency PLC signal on the communication media.

##### B.6.2.3 PLC physical, MAC, and convergence layers

*The grey-colored entities represent the whole data link and physical layer and are covered by the G3-PLC PHY and G3-PLC MAC specifications.*

### B.7 Definition of high-level communication and basic signalling

There are no additional requirements for this technology. *(This technology does not require specific signals from the EVSE, as it is a point-to-point technology that does not require association at the physical layer.)*

### B.8 Triggering

There are no additional requirements for this technology.

*NOTE:* Association requires bi-directional information exchange. The low frequency of the G3-PLC technology and the low signal levels used on the CPLT render transfer to the mains impossible. It has been demonstrated that crosstalk from mains to pilot wire was detected above 11 Vᵖ,ₚ. This exceeds the allowed signal level.

### B.9 Association EV – EVSE procedure

#### B.9.1 Overview

The G3-PLC technology on CPLT is a point-to-point communication link that does not require specific association procedures for the physical link.

#### B.9.2 Configuration of the PLC node

**\[V2G3-B09-01]** The PLC node shall be configured in order to use the key “ISOIEC\_15118-3” (TBD).

**\[V2G3-B09-02]** The PLC node shall be configured in order to use the FCC frequency band.

*NOTE 1:* There is no need to exchange the frequencies used for communication since the use of the FCC frequency band on a medium (the pilot wire) which is decoupled from the mains is not restricted. Additionally, the completion of IEEE 1901.2 and ITU G.9903 Amd 1 define global emission limits beyond Cenelec for use in Europe and rest of world.
*NOTE 2:* Additional identifier can be added in the beacons to specify conformity to ISO 15118.

#### B.9.3 Discovery of the connected PLC module

**\[V2G3-B09-03]** The “Discovery of the connected PLC module” macro block is not needed for G3 technology.

*NOTE:* The G3PLC technology supports channel estimation features which allow each G3 PLC communication node to set up a neighbour table. The neighbour table gathers a list of essential parameters for each neighbour, including the Link Quality Indicator (LQI) which is based on SNR measurements. It is possible to define a threshold under which a node would not be considered as a neighbour and will have to be disassociated, however, this feature is not considered as necessary given the fact that the G3 PLC allows the establishment of a point-to-point link between EVSE and the physically connected EV.

#### B.9.4 Validation of the identification of the PLC EVSE

**\[V2G3-B09-04]** The validation of the identification of the PLC module on the EVSE side is not relevant for G3-PLC technology.

*NOTE 1:* The validation of the identification is not applicable for G3-PLC technology.

*(Annex B continues with detailed informative descriptions of G3-PLC protocol specifics, such as data link primitives and references to IEEE 1901.2 standard. These details do not impose additional normative requirements beyond those covered in the main body and Annex A.)*

## Bibliography

$1$ IEC 61851-23, *Electric vehicle conductive charging system — Part 23: DC electric vehicle charging station*
$2$ IEC 61851-24, *Electric vehicle conductive charging system — Part 24: Control communication protocol between off-board DC charger and electric vehicle*
$3$ IEC 62196-1:2011, *Plugs, socket-outlets, vehicle connectors and vehicle inlets — Conductive charging of electric vehicles — Part 1: General requirements*
$4$ IEC 62196-2:2011, *Plugs, socket-outlets, vehicle connectors and vehicle inlets — Conductive charging of electric vehicles — Part 2: Dimensional compatibility and interchangeability requirements for a.c. pin and contact-tube accessories*
$5$ IEC 62196-3, *Plugs, socket-outlets, vehicle couplers — Conductive charging of electric vehicles — Part 3: Dimensional compatibility and interchangeability requirements for d.c. and a.c./d.c. pin and contact-tube vehicle couplers*
